<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="../estilo.css" />

    <title>Programação cliente web e Química</title>
<script>
function contaOcorrencias(palavras, palavra){
	return palavras.filter((v) => (v === palavra)).length; 
}

$(function(){
	$("#texto").click(function(){
		let valorPalavra = $("#palavra").val();
		const regex = /[0-9]/;
        if(regex.test(valorPalavra) || valorPalavra == '')
        {
            alert("Digite um valor válido.");
        }
        else{


			var palavras = valorPalavra.split(" ").map(function(palavra){ 

				return palavra.toLocaleLowerCase().replace(/[.,]/g, ''); 
			});
			console.log(palavras);

			var i = 0;
			var array_oco = [];
			var jaForam = [];
			var x = 0;
			for(palavra of palavras){ 

				if(jaForam.indexOf(palavra) == -1){
					let oco = (contaOcorrencias(palavras, palavra));
					jaForam.push(palavra); 
					array_oco[x] = oco;
				}
				else{
					x--;
				}
				i++;
				x++;
				}

			for(i=0;i<jaForam.length;i++)
			{
				let objeto_tr = $("<tr>");
				$("#acervo").append(objeto_tr);
						

				let objeto_td = $("<td>"); 
				let objeto_td2 = $("<td>");
				objeto_td.text(jaForam[i]);
				objeto_td2.text(array_oco[i]);
				console.log(jaForam);

				objeto_tr.append(objeto_td);
				objeto_tr.append(objeto_td2);

				
			}
			
		}


	})

	$("#limpar").click(function(){
        $("#palavra").val("");
        $("#resultado").text("");
        $("#acervo td").remove();
    })

})
</script>
</head>
<body>
    <section>
        <div id="page-landing">
            <div id="container">
                <h1>Ocorrências </h1>
                <div id="materias">
                    <br>
            <h3 >Insira palavra/frase: </h3>
        <br>
        <p id="textodesafio3"> Programa que lê um texto 
        e separa todas as palavras em um array, indicando
         para cada uma delas o número de vezes que aparece no
          texto. 
     </p>
        <div id="tarefas2"><br>
        <input id="palavra"> 
        <button id="texto">Executar</button>
        <button id="limpar" class="btn">Limpar</button>
        <p id="resultado">
    
        </p>
    </div></div>
    </section>
    
    <section id="l2" style=" width: 100%;">
        <section id="tamanho3" style="padding-left: 50px;">
        <h1 id="teste" style="padding-left: 0px;">Tabela</h1>
        <table width="30%" border="1" id="acervo">
            <tr>
                <th class="teste">Nome</th>
                <th class="teste">Ocorrencias</th>
            </tr>
        </table>
    </section>
    </section>
    
</body>